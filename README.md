# Abrikos Server (Express + Socket.IO)

Базовый чат-сервер на Node.js с Express и Socket.IO. Поддерживает онлайн-юзеров, поиск и приватные сообщения.

## Что делает
- хранит онлайн-пользователей в памяти (Map)
- уведомляет клиентов об онлайн-юзерах
- поиск пользователей по нику
- отправка приватных сообщений между пользователями
- статусный эндпоинт /status

## Установка
1. Установите зависимости: `npm install`
2. Запустите: `PORT=3001 node index.js` (или через скрипт npm)

## Конфигурация
- PORT — порт сервера (по умолчанию 3001)
- HOST — хост (0.0.0.0 по умолчанию)
- CORS разрешает доступ с любых источников (по умолчанию)

## Как работает клиент
- Подключение и отправка user_joined: `{ nickname, avatar }`
- Поиск: `search_users` с строкой поиска → ответ `search_results`
- Приватное сообщение: `send_private_message` `{ to, text }`
  - сервер отправляет `new_private_message` получателю и отправителю (с isOwn: true для отправителя)
- Отключение — удаление из онлайн-пользователей и обновление списка

## Эндпоинты
- GET /status — возвращает статус сервера и число онлайн
  Пример: `{ status: 'OK', usersOnline: N, message: 'Abrikos Server фурычит!' }`

## Примечания
- Хранение в памяти: данные теряются при перезапуске
- Для продакшена рассмотрите Redis/базу данных и авторизацию